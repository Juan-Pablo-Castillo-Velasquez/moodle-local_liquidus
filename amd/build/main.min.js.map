{"version":3,"sources":["../src/main.js"],"names":["define","$","Log","Router","requireTracker","trackerInfo","trackerId","staticShares","plugins","localLiquidusCurrentPlugins","userRole","localLiquidusUserRole","require","tracker","debug","loadTracker","done","registerTracker","Liquidus","trackersInfo","eventDef","init","info"],"mappings":"mnCAsBAA,OAAM,uBAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,uBAAvB,CAAD,CACN,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAyB,IAEjBC,CAAAA,CAAc,CAAG,SAASC,CAAT,CAAsB,CACvC,GAAI,CAACA,CAAW,CAACC,SAAjB,CAA4B,CACxB,MACH,CAGD,GAAID,CAAW,CAACE,YAAZ,EACGF,CAAW,CAACE,YAAZ,CAAyBC,OAD5B,EAE0C,WAAvC,QAAOC,CAAAA,2BAFd,CAE2D,CACvDJ,CAAW,CAACE,YAAZ,CAAyBC,OAAzB,CAAmCC,2BACtC,CAGD,GAAIJ,CAAW,CAACE,YAAZ,EACGF,CAAW,CAACE,YAAZ,CAAyBG,QAD5B,EAEoC,WAAjC,QAAOC,CAAAA,qBAFd,CAEqD,CACjDN,CAAW,CAACE,YAAZ,CAAyBG,QAAzB,CAAoCC,qBACvC,CAEDC,OAAO,CAAC,CAAC,kBAAoBP,CAAW,CAACC,SAAhC,CAA4C,OAA7C,CAAD,CAAwD,SAASO,CAAT,CAAkB,CAC7EX,CAAG,CAACY,KAAJ,CAAU,UAAYT,CAAW,CAACC,SAAxB,CAAoC,yBAA9C,EACAO,CAAO,CAACE,WAAR,CAAoBV,CAApB,EACKW,IADL,CACU,iBAAMb,CAAAA,CAAM,CAACc,eAAP,CAAuBJ,CAAvB,CAAN,CADV,CAGH,CALM,CAMV,CA3BoB,CA6BjBK,CAAQ,CAAG,SAASC,CAAT,CAAuBC,CAAvB,CAAiC,CAC5ClB,CAAG,CAACY,KAAJ,CAAU,mBAAV,EAEAX,CAAM,CAACkB,IAAP,CAAYD,CAAZ,EAEAlB,CAAG,CAACY,KAAJ,CAAUK,CAAV,EAL4C,iCAO3BA,CAP2B,QAO5C,2BAA+B,IAAtBG,CAAAA,CAAsB,SAC3BlB,CAAc,CAACkB,CAAD,CACjB,CAT2C,+BAU/C,CAvCoB,CAyCrB,MAAO,CACH,KAAQ,cAASH,CAAT,CAAuBC,CAAvB,CAAiC,CACrC,MAAO,IAAIF,CAAAA,CAAJ,CAAaC,CAAb,CAA2BC,CAA3B,CACV,CAHE,CAKV,CA/CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Liquidus main module. Loads specific trackers.\n *\n * @package   local_liquidus\n * @copyright Copyright (c) 2020 Open LMS\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/log', 'local_liquidus/router'],\nfunction($, Log, Router) {\n\n    var requireTracker = function(trackerInfo) {\n        if (!trackerInfo.trackerId) {\n            return;\n        }\n\n        /* global localLiquidusCurrentPlugins */\n        if (trackerInfo.staticShares\n            && trackerInfo.staticShares.plugins\n            && typeof localLiquidusCurrentPlugins !== 'undefined') {\n            trackerInfo.staticShares.plugins = localLiquidusCurrentPlugins;\n        }\n\n        /* global localLiquidusUserRole */\n        if (trackerInfo.staticShares\n            && trackerInfo.staticShares.userRole\n            && typeof localLiquidusUserRole !== 'undefined') {\n            trackerInfo.staticShares.userRole = localLiquidusUserRole;\n        }\n\n        require(['local_liquidus/' + trackerInfo.trackerId + '-lazy'], function(tracker) {\n            Log.debug('Loaded ' + trackerInfo.trackerId + ' tracker. Initializing.');\n            tracker.loadTracker(trackerInfo)\n                .done(() => Router.registerTracker(tracker))\n            ;\n        });\n    };\n\n    var Liquidus = function(trackersInfo, eventDef) {\n        Log.debug('Loading Liquidus.');\n\n        Router.init(eventDef);\n\n        Log.debug(trackersInfo);\n        // Load a new dependency.\n        for (let info of trackersInfo) {\n            requireTracker(info);\n        }\n    };\n\n    return {\n        'init': function(trackersInfo, eventDef) {\n            return new Liquidus(trackersInfo, eventDef);\n        }\n    };\n});\n"],"file":"main.min.js"}