define(["jquery","core/log"],function(a,b){var c=this,d={};return c.addKeenIO=function(){var e=a.Deferred(),f=d.trackerInfo.writeKey,g=d.trackerInfo.projectId;return f&&g?(function(a,b,c){var d,e=!("Keen"===a||!window.Keen)&&window.Keen;c[a]=c[a]||{ready:function(f){var g,h=document.getElementsByTagName("head")[0],i=document.createElement("script"),j=window;i.onload=i.onerror=i.onreadystatechange=function(){if(!(i.readyState&&!/^c|loade/.test(i.readyState)||g)){if(i.onload=i.onreadystatechange=null,g=1,d=j.Keen,e)j.Keen=e;else try{delete j.Keen}catch(b){j.Keen=void 0}c[a]=d,c[a].ready(f)}},i.async=1,i.src=b,h.parentNode.insertBefore(i,h)}}}("KeenAsync","https://d26b395fwzu5fz.cloudfront.net/keen-tracking-1.4.2.min.js",this),KeenAsync.ready(function(){c.client=new KeenAsync({projectId:g,writeKey:f}),e.resolve(d)}),e):void b.debug("Liquidus is misconfigured for keen.io, Write Key or Project ID are missing.")},d.loadTracker=function(a){return d.trackerInfo=a,c.addKeenIO()},d.identify=function(){c.client.recordEvent("identify",{userHash:d.trackerInfo.staticShares.userHash})},d.trackPage=function(){c.client.recordEvent("pageviews",d.trackerInfo.staticShares)},d.processEvent=function(a,e,f){c.client.recordEvent(e,{userHash:d.trackerInfo.staticShares.userHash,eventData:f},function(){a.resolve(!0),b.debug("KeenIO resolved.")})},d});