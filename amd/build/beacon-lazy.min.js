define(["jquery","core/log"],function(a,b){var c=this,d={};return c.addAnalyticsJS=function(){var c=a.Deferred();return d.trackerInfo.beaconURL?(c.resolve(!0),c):(b.debug("Liquidus is misconfigured for the AWS Beacon, Beacon URL is missing."),null)},d.loadTracker=function(a){return d.trackerInfo=a,c.addAnalyticsJS()},d.identify=function(){a.ajax({url:d.trackerInfo.beaconURL,method:"POST",headers:d.trackerInfo.staticShares}).done(function(){b.debug("Liquidus identified with beacon.")})},d.trackPage=function(){a.ajax({url:d.trackerInfo.beaconURL,method:"POST",headers:{userHash:d.trackerInfo.staticShares.userHash,page:window.location.pathname.split("/").slice(-1),referrer_page:document.referrer,custom_metric_name:"userAgent",custom_metric_string_value:navigator.userAgent}}).done(function(){b.debug("Liquidus sent page to beacon.")})},d.heartBeat=function(){a.ajax({url:d.trackerInfo.beaconURL,method:"POST",headers:{userHash:d.trackerInfo.staticShares.userHash,custom_metric_name:"heartBeat",custom_metric_string_value:1}}).done(function(){b.debug("Liquidus sent heart beat to beacon.")})},d.processEvent=function(c,e,f){a.ajax({url:d.trackerInfo.beaconURL,method:"POST",headers:{userHash:d.trackerInfo.staticShares.userHash,custom_metric_name:e,custom_metric_string_value:JSON.stringify(f)}}).done(function(){c.resolve(!0),b.debug("AWS Beacon promise resolved.")})},d});